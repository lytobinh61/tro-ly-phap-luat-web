<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Qu·∫£n l√Ω t√†i kho·∫£n</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<div class="main-container">

    <div class="header">
        <div class="title">üë§ Qu·∫£n l√Ω t√†i kho·∫£n ng∆∞·ªùi d√πng</div>
        <div class="user-info">
            <a href="{{ url_for('index') }}">‚¨Ö V·ªÅ trang tr·ª£ l√Ω</a>
            | Xin ch√†o, <strong>{{ current_user.username }}</strong>
            | <a href="{{ url_for('logout') }}">ƒêƒÉng xu·∫•t</a>
        </div>
    </div>

    <!-- Th√¥ng b√°o -->
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <ul style="color: green;">
                {% for msg in messages %}
                    <li>{{ msg }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    {% endwith %}

    <!-- Danh s√°ch user -->
    <h3>Danh s√°ch t√†i kho·∫£n</h3>
    <table border="1" cellpadding="5" cellspacing="0" style="border-collapse: collapse; width: 100%; font-size: 14px;">
        <tr style="background: #eef2ff;">
            <th>ID</th>
            <th>T√†i kho·∫£n</th>
            <th>H·∫øt h·∫°n</th>
            <th>ƒêang ho·∫°t ƒë·ªông</th>
            <th>Admin</th>
            <th>Ch·ªânh s·ª≠a</th>
        </tr>
        {% for u in users %}
        <tr>
            <td>{{ u.id }}</td>
            <td>{{ u.username }}</td>
            <td>{{ u.expire_date }}</td>
            <td>{{ "C√≥" if u.is_active_flag else "Kh√¥ng" }}</td>
            <td>{{ "C√≥" if u.is_admin_flag else "Kh√¥ng" }}</td>
            <td>
				<a href="{{ url_for('admin_edit_user', user_id=u.id) }}">S·ª≠a</a><br>
				Gia h·∫°n:
				<a href="{{ url_for('admin_extend_30', user_id=u.id) }}">+30</a> |
				<a href="{{ url_for('admin_extend_60', user_id=u.id) }}">+60</a> |
				<a href="{{ url_for('admin_extend_90', user_id=u.id) }}">+90</a> |
				<a href="{{ url_for('admin_extend_180', user_id=u.id) }}">+180</a>
			</td>

        </tr>
        {% endfor %}
    </table>

    <hr>

    <!-- Form t·∫°o user m·ªõi -->
    <h3>Th√™m t√†i kho·∫£n m·ªõi</h3>
    <form method="post" action="{{ url_for('admin_create_user') }}" style="font-size: 14px;">
        <label>T√†i kho·∫£n:</label><br>
        <input type="text" name="username" required><br><br>

        <label>M·∫≠t kh·∫©u:</label><br>
        <input type="password" name="password" required><br><br>

        <label>Ng√†y h·∫øt h·∫°n:</label><br>
        <input type="date" name="expire_date" required><br><br>

        <label>
            <input type="checkbox" name="is_active" checked>
            Cho ph√©p ƒëƒÉng nh·∫≠p
        </label><br>

        <label>
            <input type="checkbox" name="is_admin">
            T√†i kho·∫£n admin
        </label><br><br>

        <button type="submit">T·∫°o t√†i kho·∫£n</button>
    </form>

</div>

</body>
</html>
